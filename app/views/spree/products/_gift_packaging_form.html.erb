<div id="cart-form-gift-packaging">
<% if @product.possible_gift_packages.count > 0 && @product.shipping_category.name != 'Non Shipping' %>
	<h4>Gift Packaging</h4>
	<ul id="gift-packaging-mockup">
		<% @product.possible_gift_packages.each do |gift_package| %>
			<li onclick="javascript:$('#gift-packaging-dialog_<%= gift_package.id -%>').dialog('open');$(this).children('input:first').attr('checked',true);"><%= radio_button_tag "gift_packages[#{@product.id}]", gift_package.id, gift_package.default_for_product?(@product) -%>
			<%= image_tag gift_package.image(:midi) -%> 
			<span style="display:inline-block;width:130px;line-height:1.2em;"><%= gift_package.title -%> (<%= number_to_currency gift_package.price -%>)</span></li>
		<% end %>
		<li onclick="javascript:$(this).children('input:first').attr('checked',true);"><%= radio_button_tag "gift_packages[#{@product.id}]", 0 -%>No Gift packaging</li>
	</ul>
<% else %>
	<%= f.hidden_field "gift_packages[#{@product.id}]", :value => nil %>
<% end %>
</div>
<div style="clear:both;"></div>


<style>
	#gift-packaging-mockup li {cursor: hand; cursor: pointer;}
	.gift-packaging-dialog .ui-icon {display:inline;}
	.gift-packaging-dialog a.button {color:#fff;}
	.gift-packaging-dialog div.price {font-size:36px;line-height:36px;color:#aaa;font-weight:bold}
	.gift-packaging-dialog div.price:first-letter {font-size:28px;vertical-align:super;}
</style>

<script type="text/javascript">
$(function() {
	$( "#dialog:ui-dialog" ).dialog( "destroy" );
	<% Spree::GiftPackage.all.each do |gift_package| %>

		$("#gift-packaging-dialog_<%= gift_package.id -%>").dialog({
			autoOpen: false,
			height: 500,
			width: 500,
			modal: true,
			title: ""
		});

	<% end %>
});

</script>

<% @product.possible_gift_packages.each do |gift_package| %>
	<div id="gift-packaging-dialog_<%= gift_package.id -%>" class="gift-packaging-dialog">
		<h2><%= gift_package.title -%></h2>
		<div><%= gift_package.description %></div>
		<div class="product-image" style="float:left;width:180px;margin-top:24px;margin-left:24px;">
	  		<%= image_tag gift_package.image.url(:thumb), :itemprop => "name", :style => "float:right;text-decoration:none;"  %>
		</div>
		<div style="float:left;margin-top:20px;margin-left:24px;width:240px;">
			<div class="price selling" itemprop="price"><%= number_to_currency gift_package.price %></div>
		</div>
		<div class="clearfix"></div>
		<div style="margin:24px auto auto 160px;">
			<%= link_to_function t(:continue_shopping), "$('#gift-packaging-dialog_#{gift_package.id}').dialog('close');", :class => 'button large' %><br /><br />
		</div>
	</div>
<% end %>
